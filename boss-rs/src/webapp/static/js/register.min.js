'use strict';var $=window.$;
$(document).ready(function(){function b(a,e,I,c,d){try{var f=[];[].push.apply(f,arguments);f.unshift("send","event");window.ga.apply(window,f)}catch(b){window.console&&window.console.error("error sending event",b&&(b.message||b.messages),b)}}function d(a,e,b){var c=$(a);if(e){c.attr("data-content",e);var d=function(){var a=this;setTimeout(function(){$(a).popover("destroy").popover(f).popover("show")},300);$(this).off("hidden.bs.popover",d)};t[c.selector]=e;var f=$.extend(b,{content:function(){return t[c.selector]},
trigger:"manual"});c.on("hidden.bs.popover",d)}c.popover("hide")}function h(a){q&&(q=clearTimeout(q),k.removeClass("hinge rotateInUpLeft"));k.show();l.hide()}function u(){var a=Date.now()-v;1E3>a?setTimeout(u,a):(l.removeClass("bounceInLeft").addClass("slideOutRight"),setTimeout(function(){l.hide().removeClass("slideOutRight")},1E3))}function w(){var a=x.val();if(a&&"string"===typeof a)d(y);else return d(y,"First Name is required.",{}),!1;return!0}function z(){var a=A.val();if(a&&"string"===typeof a)d(B);
else return d(B,"Last Name is required.",{}),!1;return!0}function C(){var a=D.val();if(!a.length)return d(g,"Email address is required."),!1;if(!a.match(/^[\w-\._\+%]+@(?:[\w-]+\.)+[\w]{2,6}$/))return d(g,'Email address "'+a+'" is not valid.',{}),!1;g&&g.popover&&g.popover("hide");H(a);return!0}function H(a){return a?$.get("/api/register/checkuser/"+a).done(function(e,b,c){e=e||{};e.customerExists||e.CustomerExists?d(g,'Email address "'+a+'" is already registered.',{placement:"left"}):d(g)}).fail(function(a,
b,c){h(!0)}):null}function E(){if(!m.val().length)return d(n,"Password is required."),!1;n&&n.popover&&n.popover("hide");return!0}function F(a){var e=[],b,c;$.each(a,function(a,f){b='[name="'+f.field+'"]';c=$(b).not('[type="hidden"]').parents(".form-row");c.selector=b;c.length?d(c,f.message):e.push((f.field?f.field+": ":"")+f.message)});e.length&&h(e.join("\n<br>"))}var r=$("#registerForm"),G=r.find('[type="submit"]'),x=$('[name="fName"]'),A=$('[name="lName"]'),D=$('[name="email"]'),m=$('[name="password"]'),
p=$('[name="confirmPassword"]'),y=$("#firstnamerow"),B=$("#lastnamerow"),g=$("#emailrow"),n=$("#passwordrow"),l=$("#alert-server-sending"),k=$("#alert-server-error"),s=!1;k.html();p.type="hidden";p.parents(".form-group").is(m.parents(".form-group"))||p.parents(".form-group").hide();var t={},q=null,v=null;x.on("blur",w);A.on("blur",z);D.on("blur",C);m.on("blur",E);r.on("submit",function(a){a.preventDefault();if(s)return!1;a=1&w();a&=z();a&=C();a&=E();if(!a)return!1;s=!0;G.prop("disabled",!0);l.show();
k.hide();v=Date.now();p.val(m.val());$.post("/api/register",r.serialize()).done(function(a,d,c){a=a||{};a.errors?(b("register","signup","invalid credentials",c.status),F(a.errors)):400<=c.status?(b("register","signup","fail",c.status),h()):2===(c.status/100|0)||!1===a.errors||!0==a.registrationSuccess?(b("register","signup","success"),window.location="/login"):b("register","signup","unhandled")}).fail(function(a,d,c){""===a.responseText?(b("register","signup","success"),window.location="/login"):
a.responseJSON&&a.responseJSON.errors?(b("register","signup","invalid credentials",a.status),F(a.responseJSON.errors)):(b("register","signup","fail",a.status),h())}).always(function(a,b,c){s=!1;G.removeProp("disabled");u()});return!1})});


// (1398995049908)

//# sourceMappingURL=/static/js/register.min.js.map